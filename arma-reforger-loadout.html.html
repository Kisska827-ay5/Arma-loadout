<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arma Reforger ‚Äì Loadout Planner Pro (Hybrid Visual)</title>
  <style>
    body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:#020617;color:#e5e7eb;margin:0;padding:24px}
    h1{font-size:1.9rem;margin:0 0 4px}
    h2{margin:0 0 8px}
    p{color:#94a3b8;margin:0 0 14px}
    .container{max-width:1100px;margin:auto}
    .card{background:#020617;border-radius:18px;padding:22px;margin-bottom:18px;box-shadow:0 15px 40px rgba(0,0,0,.5);border:1px solid #1e293b}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    label{font-size:.8rem;color:#cbd5f5}
    input,select,textarea{width:100%;margin-top:4px;padding:10px;border-radius:12px;border:none;background:#020617;color:#e5e7eb;outline:1px solid #1e293b}
    textarea{resize:vertical;min-height:90px}
    button{background:#2563eb;border:none;color:white;padding:10px 16px;border-radius:14px;cursor:pointer;font-weight:600}
    button.secondary{background:#334155}
    button.danger{background:#b91c1c}
    button.small{padding:6px 10px;font-size:.8rem}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    .loadout{border:1px solid #1e293b;padding:14px;border-radius:14px;margin-top:12px;background:#020617}
    .tag{font-size:.7rem;background:#1e293b;padding:2px 8px;border-radius:999px;margin-left:6px}
    .picker{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px}
    .item{border:1px solid #1e293b;border-radius:14px;padding:8px;cursor:pointer;background:#020617;transition:.15s}
    .item:hover{transform:translateY(-2px)}
    .item.active{outline:2px solid #2563eb}
    .item img{width:100%;height:80px;object-fit:contain;display:block;margin-bottom:6px}
    .item small{color:#94a3b8}
    footer{text-align:center;color:#64748b;font-size:.75rem;margin-top:26px}
  </style>
</head>
<body>
<div class="container">
  <h1>üéØ Arma Reforger ‚Äì Loadout Planner Pro (Hybrid Visual)</h1>
  <p>Legale Icons eingebaut ¬∑ Eigene Bilder optional (Fallback).</p>

  <div class="card">
    <h2>Neues / Bearbeiten</h2>
    <div class="grid">
      <div>
        <label>Name</label>
        <input id="name" placeholder="Rifleman CQB" />
      </div>
      <div>
        <label>Rolle</label>
        <select id="role"><option>Rifleman</option><option>Marksman</option><option>Medic</option><option>Support</option><option>Engineer</option></select>
      </div>
    </div>

    <h3>Prim√§rwaffe</h3>
    <div class="picker" id="weaponPicker"></div>

    <h3>Aufs√§tze</h3>
    <div class="picker" id="attachmentPicker"></div>

    <h3>Kleidung & Gear</h3>
    <div class="picker" id="gearPicker"></div>

    <label style="margin-top:10px;display:block;">Notizen</label>
    <textarea id="notes" placeholder="Munition, Rolle im Squad, Besonderheiten"></textarea>

    <div class="actions" style="margin-top:14px;">
      <button onclick="saveLoadout()">üíæ Speichern</button>
      <button class="secondary" onclick="clearForm()">‚Ü© Reset</button>
    </div>
  </div>

  <div class="card">
    <h2>Gespeicherte Loadouts</h2>
    <div id="list"></div>
  </div>

  <footer>Hybrid-Modus: Icons eingebaut ¬∑ Eigene Bilder √ºberschreiben automatisch</footer>
</div>

<script>
function weaponIcon(label){return `data:image/svg+xml;utf8,`+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 60'><rect x='2' y='2' rx='10' ry='10' width='196' height='56' fill='#020617' stroke='#334155' stroke-width='3'/><rect x='20' y='26' width='110' height='8' rx='4' fill='#94a3b8'/><rect x='130' y='22' width='18' height='16' rx='3' fill='#64748b'/><rect x='148' y='28' width='22' height='6' rx='3' fill='#475569'/><text x='100' y='54' text-anchor='middle' font-size='10' fill='#cbd5f5'>${label}</text></svg>`)}
function attachmentIcon(label){return `data:image/svg+xml;utf8,`+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 80'><rect x='6' y='6' rx='12' ry='12' width='68' height='68' fill='#020617' stroke='#334155' stroke-width='3'/><circle cx='40' cy='40' r='16' fill='#64748b'/><text x='40' y='72' text-anchor='middle' font-size='9' fill='#cbd5f5'>${label}</text></svg>`)}
function gearIcon(label){return `data:image/svg+xml;utf8,`+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 80'><rect x='6' y='6' rx='14' ry='14' width='68' height='68' fill='#020617' stroke='#334155' stroke-width='3'/><rect x='26' y='22' width='28' height='36' rx='6' fill='#94a3b8'/><text x='40' y='72' text-anchor='middle' font-size='9' fill='#cbd5f5'>${label}</text></svg>`)}

const weapons=[{name:'M4A1',imgLocal:'assets/weapons/m4a1.png',imgIcon:weaponIcon('M4A1')},{name:'AK74',imgLocal:'assets/weapons/ak74.png',imgIcon:weaponIcon('AK74')},{name:'MP5',imgLocal:'assets/weapons/mp5.png',imgIcon:weaponIcon('MP5')},{name:'M249',imgLocal:'assets/weapons/m249.png',imgIcon:weaponIcon('M249')},{name:'M14',imgLocal:'assets/weapons/m14.png',imgIcon:weaponIcon('M14')}];
const attachments=[{name:'Red Dot',imgLocal:'assets/attachments/reddot.png',imgIcon:attachmentIcon('RedDot')},{name:'ACOG',imgLocal:'assets/attachments/acog.png',imgIcon:attachmentIcon('ACOG')},{name:'Grip',imgLocal:'assets/attachments/grip.png',imgIcon:attachmentIcon('Grip')},{name:'Laser',imgLocal:'assets/attachments/laser.png',imgIcon:attachmentIcon('Laser')},{name:'Flashlight',imgLocal:'assets/attachments/flashlight.png',imgIcon:attachmentIcon('Light')},{name:'Suppressor',imgLocal:'assets/attachments/suppressor.png',imgIcon:attachmentIcon('Supp')}];
const gear=[{name:'Helmet',imgLocal:'assets/gear/helmet.png',imgIcon:gearIcon('Helmet')},{name:'Vest',imgLocal:'assets/gear/vest.png',imgIcon:gearIcon('Vest')},{name:'Backpack',imgLocal:'assets/gear/backpack.png',imgIcon:gearIcon('Pack')},{name:'Radio',imgLocal:'assets/gear/radio.png',imgIcon:gearIcon('Radio')},{name:'Medkit',imgLocal:'assets/gear/medkit.png',imgIcon:gearIcon('Med')}];

function resolveImg(item){return new Promise(res=>{const i=new Image();i.src=item.imgLocal;i.onload=()=>res(item.imgLocal);i.onerror=()=>res(item.imgIcon);});}
async function createPicker(items,id){const c=document.getElementById(id);c.innerHTML='';for(const it of items){const src=await resolveImg(it);const d=document.createElement('div');d.className='item';d.innerHTML=`<img src="${src}"><small>${it.name}</small>`;d.onclick=()=>d.classList.toggle('active');c.appendChild(d);}}
createPicker(weapons,'weaponPicker');createPicker(attachments,'attachmentPicker');createPicker(gear,'gearPicker');

function saveLoadout(){const name=document.getElementById('name').value;const role=document.getElementById('role').value;const notes=document.getElementById('notes').value;const sw=[...document.querySelectorAll('#weaponPicker .item.active')].map(e=>e.querySelector('small').innerText);const sa=[...document.querySelectorAll('#attachmentPicker .item.active')].map(e=>e.querySelector('small').innerText);const sg=[...document.querySelectorAll('#gearPicker .item.active')].map(e=>e.querySelector('small').innerText);const l=JSON.parse(localStorage.getItem('loadouts')||'[]');l.push({name,role,notes,weapons:sw,attachments:sa,gear:sg});localStorage.setItem('loadouts',JSON.stringify(l));renderList();clearForm();}
function clearForm(){document.getElementById('name').value='';document.getElementById('notes').value='';document.getElementById('role').selectedIndex=0;document.querySelectorAll('.item.active').forEach(e=>e.classList.remove('active'));}
function renderList(){const list=document.getElementById('list');const l=JSON.parse(localStorage.getItem('loadouts')||'[]');list.innerHTML='';l.forEach((lo,i)=>{const d=document.createElement('div');d.className='loadout';d.innerHTML=`<strong>${lo.name}</strong> <span class='tag'>${lo.role}</span><p>Weapons: ${lo.weapons.join(', ')}</p><p>Attachments: ${lo.attachments.join(', ')}</p><p>Gear: ${lo.gear.join(', ')}</p><p>Notes: ${lo.notes}</p><div class='actions'><button onclick='editLoadout(${i})' class='small secondary'>‚úè Edit</button><button onclick='deleteLoadout(${i})' class='small danger'>üóë Delete</button></div>`;list.appendChild(d);});}
function editLoadout(i){const l=JSON.parse(localStorage.getItem('loadouts')||'[]');const lo=l[i];document.getElementById('name').value=lo.name;document.getElementById('role').value=lo.role;document.getElementById('notes').value=lo.notes;document.querySelectorAll('.item').forEach(e=>e.classList.remove('active'));document.querySelectorAll('#weaponPicker .item').forEach(e=>{if(lo.weapons.includes(e.querySelector('small').innerText))e.classList.add('active')});document.querySelectorAll('#attachmentPicker .item').forEach(e=>{if(lo.attachments.includes(e.querySelector('small').innerText))e.classList.add('active')});document.querySelectorAll('#gearPicker .item').forEach(e=>{if(lo.gear.includes(e.querySelector('small').innerText))e.classList.add('active')});l.splice(i,1);localStorage.setItem('loadouts',JSON.stringify(l));renderList();}
function deleteLoadout(i){const l=JSON.parse(localStorage.getItem('loadouts')||'[]');l.splice(i,1);localStorage.setItem('loadouts',JSON.stringify(l));renderList();}
renderList();
</script>
</body>
</html>
